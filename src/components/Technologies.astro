---
import TechCarousel from "./TechCarousel.astro";
import ExperienceRating from './ExperienceRating.astro';

import Java from "./icons/Java.astro";
import JavaScript from "./icons/JavaScript.astro";
import TypeScript from "./icons/TypeScript.astro";
import Python from "./icons/Python.astro";
import PHP from "./icons/PHP.astro";

import React from "./icons/React.astro";
import Angular from "./icons/Angular.astro";
import Vue from "./icons/Vue.astro";

import Spring from "./icons/Spring.astro";
import Express from "./icons/Express.astro";
import FastAPI from "./icons/FastAPI.astro";

import MySQL from "./icons/MySQL.astro";
import MariaDB from "./icons/MariaDB.astro";
import PostgreSQL from "./icons/PostgreSQL.astro";
import MongoDB from "./icons/MongoDB.astro";

import Docker from "./icons/Docker.astro";
import GoogleCloud from "./icons/GoogleCloud.astro";

import CSS from "./icons/CSS.astro";
import Tailwind from "./icons/Tailwind.astro";
import Bootstrap from "./icons/Bootstrap.astro";

import Git from "./icons/Git.astro";
import NPM from "./icons/NPM.astro";
import Vite from "./icons/Vite.astro";

// Define tus tecnologías con sus nombres y el componente de icono correspondiente
const technologies = [
  // Lenguajes de Programación
  { section: "Lenguajes", name: "Java", experience: 3, icon: Java },
  { section: "Lenguajes", name: "JavaScript", experience: 3, icon: JavaScript },
  { section: "Lenguajes", name: "TypeScript", experience: 3, icon: TypeScript },
  { section: "Lenguajes", name: "Python", experience: 2, icon: Python },
  { section: "Lenguajes", name: "PHP", experience: 2, icon: PHP },

  // Frameworks Frontend
  { section: "Frontend", name: "React", experience: 3, icon: React },
  { section: "Frontend", name: "Angular", experience: 3, icon: Angular },
  { section: "Frontend", name: "Vue.js", experience: 1, icon: Vue },

  // Frameworks Backend
  { section: "Backend", name: "Spring", experience: 3, icon: Spring },
  { section: "Backend", name: "Express.js", experience: 3, icon: Express },
  { section: "Backend", name: "FastAPI", experience: 3, icon: FastAPI },

  // Bases de Datos
  { section: "Bases de Datos", name: "MySQL", experience: 4, icon: MySQL },
  { section: "Bases de Datos", name: "MariaDB", experience: 4, icon: MariaDB },
  { section: "Bases de Datos", name: "PostgreSQL", experience: 2, icon: PostgreSQL },
  { section: "Bases de Datos", name: "MongoDB", experience: 1, icon: MongoDB },

  // DevOps y Cloud
  { section: "DevOps y Cloud", name: "Docker", experience: 4, icon: Docker },
  { section: "DevOps y Cloud", name: "Google Cloud", experience: 1, icon: GoogleCloud },

  // CSS Frameworks
  { section: "CSS", name: "CSS", experience: 4, icon: CSS },
  { section: "CSS", name: "Tailwind", experience: 3, icon: Tailwind },
  { section: "CSS", name: "Bootstrap", experience: 2, icon: Bootstrap },

  // Build Tools
  { section: "Herramientas", name: "Git", experience: 4, icon: Git },
  { section: "Herramientas", name: "NPM", experience: 3, icon: NPM },
  { section: "Herramientas", name: "Vite", experience: 2, icon: Vite },
];

// Definir el tipo para una tecnología
type Technology = {
  section: string;
  name: string;
  experience: number;
  icon: any;
};

// Agrupar las tecnologías por sección
const technologiesBySection = technologies.reduce(
  (acc, tech) => {
    if (!acc[tech.section]) acc[tech.section] = [];
    acc[tech.section].push(tech);
    return acc;
  },
  {} as Record<string, Technology[]>
);
---

<!-- Carrusel de tecnologías -->
<div class="relative w-full max-w-4xl mx-auto my-8">
  <TechCarousel technologies={technologies} />
</div>

<!-- Listas de tecnologías por sección -->
<div class="mt-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
  {Object.entries(technologiesBySection).map(([section, techs]) => (
    <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 shadow-md">
      <h3 class="text-lg font-bold mb-3 text-gray-800 dark:text-gray-200">
        {section}
      </h3>
      <ul class="space-y-2">
        {techs.map((tech: Technology) => (
          <li class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
              <div class="icon-wrapper">
                <tech.icon />
              </div>
              <span class="text-sm text-gray-700 dark:text-gray-300">
                {tech.name}
              </span>
            </div>
            <ExperienceRating experience={tech.experience} />
          </li>
        ))}
      </ul>
    </div>
  ))}
</div>

<style>
  .icon-wrapper {
    width: 1rem;
    height: 1rem;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .icon-wrapper :global(svg) {
    width: 100%;
    height: 100%;
    fill: currentColor;
    stroke: currentColor;
  }
</style>

